#!/usr/bin/env make -f

# Commands...
cpp=cc -E
cc=cc
intr_ld=ld
ld=cc
shell=/bin/sh

# Arguments...
cppargs=-Wall
ccargs=-g -Wall -c
intr_ldargs=-r
ldargs=

includearg=-I
definearg=-D
libarg=-l
outputarg=-o

preargs=

includes=common/include gui/include os/unix/include read/include write/include
defines=NULL=0
libs=m sweer
incb=\`for include in \$$(includes); do\
	echo \" \$$(includearg) \$$\$$include \";done\`
defb=\`for define in \$$(defines); do\
	echo \" \$$(definearg) \$$\$$define \"; done\`
libb=\`for lib in \$$(libs); do \
	echo \" \$$(libarg) \$$\$$lib \"; done\`

# File extentions...
cext=.c
cppext=.i
objext=.o

# Build targets...
mainobj=main.o
bin=bin/posric

# Directories...
installdir=/usr/bin
sourcedirs=common gui os/unix read write

# Files...
tccbuildf=posric.pjr
cfiles=\`for dir in \$$(sourcedirs); do echo \" \$$\$$dir/*\$$(cext) \"; done\`
cppfiles=\`for dir in \$$(sourcedirs); do echo \" \$$\$$dir/*\$$(cppext) \"; done\`
objfiles=\`for dir in \$$(sourcedirs); do echo \" \$$\$$dir/*\$$(objext) \"; done\`

all:
	echo "# Generated by config..." > Makefile
	# Commands...
	echo "cpp=$(cpp)" >> Makefile
	echo "cc=$(cc)" >> Makefile
	echo "intr_ld=$(intr_ld)" >> Makefile
	echo "ld=$(ld)" >> Makefile
	echo "shell=/bin/sh" >> Makefile

	# Arguments...
	echo "cppargs=$(cppargs)" >> Makefile
	echo "ccargs=$(ccargs)" >> Makefile
	echo "intr_ldargs=$(intr_ldargs)" >> Makefile
	echo "ldargs=$(ldargs)" >> Makefile

	echo "includearg=$(includearg)" >> Makefile
	echo "definearg=$(definearg)" >> Makefile
	echo "libarg=$(libarg)" >> Makefile
	echo "outputarg=$(outputarg)" >> Makefile

	echo "preargs=$(preargs)" >> Makefile

	echo "includes=$(includes)" >> Makefile
	echo "defines=$(defines)" >> Makefile
	echo "libs=$(libs)" >> Makefile
	echo "incb=$(incb)" >> Makefile
	echo "defb=$(defb)" >> Makefile
	echo "libb=$(libb)" >> Makefile

	# File extentions...
	echo "cext=$(cext)" >> Makefile
	echo "cppext=$(cppext)" >> Makefile
	echo "objext=$(objext)" >> Makefile

	# Build targets...
	echo "mainobj=$(mainobj)" >> Makefile
	echo "bin=$(bin)" >> Makefile

	# Directories...
	echo "installdir=$(installdir)" >> Makefile
	echo "sourcedirs=$(sourcedirs)" >> Makefile

	# Files...
	echo "tccbuildf=$(tccbuildf)" >> Makefile
	echo "cfiles=$(cfiles)" >> Makefile
	echo "cppfiles=$(cppfiles)" >> Makefile
	echo "objfiles=$(objfiles)" >> Makefile
	echo "" >> Makefile
	cat Makefile.pcs >> Makefile

help:
	cat Makehelp | less
